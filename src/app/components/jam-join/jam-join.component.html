@if (isOpen) {
  <div class="jam-join-overlay" (click)="close()">
    <div class="jam-join-dialog" (click)="$event.stopPropagation()">
      <div class="dialog-header">
        <svg viewBox="0 0 24 24"><path d="M12 3v10.55c-.59-.34-1.27-.55-2-.55C7.79 13 6 14.79 6 17s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z"/></svg>
        Unirse a Jam
      </div>

      <div class="dialog-body">
        <label class="field-label">Codigo de sesion</label>
        <input
          type="text"
          class="field-input"
          placeholder="Ej: ABC123"
          [(ngModel)]="code"
          maxlength="6"
          (keydown.enter)="join()"
        />

        <label class="field-label">Tu nombre</label>
        <input
          type="text"
          class="field-input"
          placeholder="Invitado"
          [(ngModel)]="name"
          (keydown.enter)="join()"
        />

        <label class="field-label">Donde escuchar</label>
        <div class="device-selector">
          <button
            class="device-option"
            [class.active]="listenLocally"
            (click)="listenLocally = true"
          >
            <svg viewBox="0 0 24 24"><path d="M12 3v9.28c-.47-.17-.97-.28-1.5-.28C8.01 12 6 14.01 6 16.5S8.01 21 10.5 21c2.31 0 4.2-1.75 4.45-4H15V6h4V3h-7z"/></svg>
            <span class="device-label">En mi dispositivo</span>
            <span class="device-desc">Escuchar aqui</span>
          </button>
          <button
            class="device-option"
            [class.active]="!listenLocally"
            (click)="listenLocally = false"
          >
            <svg viewBox="0 0 24 24"><path d="M21 3H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H3V5h18v14zM8 15c0-1.66 1.34-3 3-3 .35 0 .69.07 1 .18V6h5v2h-3v7.03A3.003 3.003 0 0 1 11 18c-1.66 0-3-1.34-3-3z"/></svg>
            <span class="device-label">En el host</span>
            <span class="device-desc">Solo controlar</span>
          </button>
        </div>
      </div>

      <div class="dialog-actions">
        <button class="cancel-btn" (click)="close()">Cancelar</button>
        <button class="join-btn" (click)="join()" [disabled]="!code.trim()">Unirse</button>
      </div>
    </div>
  </div>
}
