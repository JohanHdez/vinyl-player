<div class="panel-card">
  <div class="panel-header">
    <svg viewBox="0 0 24 24"><path d="M15 6H3v2h12V6zm0 4H3v2h12v-2zM3 16h8v-2H3v2zM17 6v8.18c-.31-.11-.65-.18-1-.18-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3V8h3V6h-5z"/></svg>
    <span>Cola de reproduccion</span>
    <span class="playlist-count">{{ playlist().length }}</span>
  </div>

  <div class="playlist">
    @if (playlist().length === 0) {
      <div class="empty-state">
        <div class="empty-icon">
          <svg viewBox="0 0 24 24"><path d="M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z"/></svg>
        </div>
        <p>Tu lista esta vacia</p>
        <span class="empty-hint">Busca canciones para agregar</span>
      </div>
    }

    @for (song of playlist(); track song.videoId; let i = $index) {
      <div class="playlist-item" [class.active]="i === currentIndex()" (click)="playSong(i)">
        <span class="pl-number">
          @if (i === currentIndex() && isPlaying()) {
            <div class="eq-bars">
              <div class="eq-bar"></div>
              <div class="eq-bar"></div>
              <div class="eq-bar"></div>
              <div class="eq-bar"></div>
            </div>
          } @else {
            {{ i + 1 }}
          }
        </span>
        <img class="pl-thumb" [src]="thumbUrl(song.videoId)" alt="" loading="lazy">
        <div class="pl-info">
          <div class="pl-title">{{ song.title }}</div>
          <div class="pl-channel">{{ song.channel }}</div>
        </div>
        <button class="pl-remove" (click)="remove($event, i)" title="Eliminar">
          <svg viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </div>
    }
  </div>
</div>
